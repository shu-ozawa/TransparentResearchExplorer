# Transparent Research Explorer プロトタイプ要件定義書

## 1. プロジェクト概要

**プロジェクト名:** Transparent Research Explorer (TRE) プロトタイプ

**目的:** arXivから論文を検索し、検索プロセスとその結果を可視化することで、研究者の先行研究調査を支援するシステムのプロトタイプを開発する。

**コアコンセプト:** 検索クエリの枝分かれ・進化の透明化と、論文選択プロセスの可視化を中心に据え、「AIが何をどのように検索したか」を明示する。

## 2. 主要機能要件

### 2.1 クエリ設計・可視化機能
- 初期キーワード/研究テーマの入力フォーム
- Gemini APIを使用した関連クエリの自動生成と階層的表示
- クエリ間の関係を視覚的に表現する枝分かれ図（ツリー構造）
- 各クエリの意図や狙いの説明表示
- ユーザーによるクエリの編集・追加・削除機能

### 2.2 arXiv論文検索・取得機能
- arXiv APIを用いた論文メタデータの取得
- 複数クエリの並列実行と結果の統合
- 検索結果のキャッシュ機能（APIリクエスト数削減のため）
- 論文の基本情報（タイトル、著者、投稿日、抄録など）の抽出

### 2.3 論文表示とスコアリング機能
- カード形式での論文表示（視覚的に訴求力のあるデザイン）
- 各論文の関連性スコアリング（Gemini APIを活用）
- スコアリング理由の透明な説明表示
- 基本的なフィルタリング機能（日付、関連度、カテゴリ）

### 2.4 論文選択プロセスの可視化
- 選択/除外された論文の視覚的区別
- 選択理由の説明表示
- 選択論文の簡易サマリー生成

## 3. 技術スタック

### 3.1 バックエンド
- **言語/フレームワーク:** Python + FastAPI
- **AI API:** Google Gemini API
- **外部API:** arXiv API
- **データベース:** SQLite（プロトタイプ用軽量DB）
- **文書処理:** NLTK, spaCy (基本的なテキスト処理)

### 3.2 フロントエンド
- **フレームワーク:** React.js
- **UI ライブラリ:** Material-UI または Chakra UI
- **可視化ライブラリ:** D3.js（クエリツリー可視化用）
- **状態管理:** React Context API（小規模なため）

## 4. ユーザーインターフェース設計

### 4.1 メイン画面レイアウト
```
┌──────────────────────────────────────────────────────────┐
│ [ヘッダー] Transparent Research Explorer                  │
├──────────────────────────────────────────────────────────┤
│ ┌────────────────┐  ┌───────────────────────────────────┐│
│ │                │  │                                   ││
│ │  クエリ設計パネル │  │        論文表示エリア             ││
│ │  (ツリー可視化)  │  │       (カードグリッド)           ││
│ │                │  │                                   ││
│ └────────────────┘  └───────────────────────────────────┘│
│ ┌──────────────────────────────────────────────────────┐ │
│ │            選択論文と要約エリア                        │ │
│ └──────────────────────────────────────────────────────┘ │
└──────────────────────────────────────────────────────────┘
```

### 4.2 クエリ設計UI
- 初期キーワード入力フィールド
- ツリー形式のクエリ可視化
- 各クエリノードに編集/削除ボタン
- 新規クエリノード追加ボタン
- クエリ実行ボタン

### 4.3 論文カードUI
```
┌───────────────────────────────┐
│ [論文タイトル]                 │
│ 著者 (YYYY/MM)                │
│                               │
│ 抄録の冒頭（2-3行）...         │
│                               │
│ 関連性: ★★★★☆                 │
│ カテゴリ: [cs.AI] [cs.LG]      │
│                               │
│ [詳細] [選択] [PDF]           │
└───────────────────────────────┘
```

### 4.4 論文詳細UI
- モーダルウィンドウで表示
- 完全な抄録テキスト
- 関連性スコアの詳細説明
- メインクエリとの関連キーワードのハイライト
- 論文の完全なメタデータ
- arXivへのリンク

## 5. 主要なユーザーフロー

### 5.1 基本検索フロー
1. ユーザーが初期研究トピック/キーワードを入力
2. システムがGemini APIを使用して関連クエリツリーを生成
3. クエリツリーを可視化して表示
4. ユーザーがクエリを確認、必要に応じて編集
5. 「検索実行」ボタンでarXiv API検索を開始
6. 検索結果をカード形式で表示
7. ユーザーが論文を閲覧、選択

### 5.2 論文選択と要約フロー
1. ユーザーが関心のある論文カードで「選択」をクリック
2. 選択された論文がハイライト表示
3. 選択論文のリストが画面下部に表示
4. 「選択論文を要約」ボタンをクリック
5. システムがGemini APIを使用して選択論文の集合的要約を生成
6. 要約と選択論文の関係性を表示

## 6. 開発フェーズとタイムライン

### フェーズ1: 基盤構築（2週間）
- プロジェクト環境セットアップ
- arXiv APIとの連携実装
- Gemini API連携の基本実装
- シンプルなUI骨組みの実装

### フェーズ2: コア機能実装（3週間）
- クエリ生成と可視化機能の実装
- 論文検索と結果表示の実装
- 基本的なカードUIの実装
- 論文スコアリングアルゴリズム実装

### フェーズ3: UI/UX洗練と統合（2週間）
- インタラクティブな要素の強化
- 視覚的デザインの改善
- 全体システムの統合とテスト

### フェーズ4: テストと改良（1週間）
- ユーザーテスト
- バグ修正と性能最適化
- フィードバックに基づく微調整

## 7. 技術的制約と対応策

### 7.1 API制限
- **制約:** arXiv APIには1秒あたり3リクエストの制限がある
- **対応:** 検索結果のキャッシュ実装、バッチ処理による分散リクエスト

### 7.2 Gemini API使用量
- **制約:** APIの使用量に費用が発生する可能性
- **対応:** 効率的なプロンプト設計、キャッシュ実装、要求頻度の最適化

### 7.3 論文全文処理
- **制約:** arXiv APIからは論文全文の直接取得が難しい
- **対応:** プロトタイプでは抄録と基本メタデータのみ使用、将来的には論文PDFパーサーの追加を検討

## 8. 重要なUIコンポーネント詳細仕様

### 8.1 クエリツリービジュアライザー
- D3.jsを使用した階層的ツリー表示
- 各ノードはクエリテキストを表示
- クリックでノード編集モード
- ドラッグ&ドロップで再構成可能
- ズームイン/アウト機能

### 8.2 論文カードグリッド
- CSS Gridを使用した反応型レイアウト
- カードの基本情報表示（タイトル、著者、日付）
- ホバーでカード拡大エフェクト
- 関連度に基づく視覚的インジケータ（色や星評価）
- 選択状態の視覚的フィードバック

### 8.3 フィルターパネル
- 日付範囲スライダー
- カテゴリチェックボックス
- 関連度フィルタースライダー
- 著者検索フィールド
- クイックソート選択（日付順、関連度順）

## 9. データフロー

```
[ユーザー入力] → [Gemini API] → [クエリツリー生成]
                                     ↓
                                [arXiv API]
                                     ↓
[検索結果] → [メタデータ処理] → [Gemini API] → [関連度スコアリング]
                                                 ↓
                                           [UI表示・可視化]
                                                 ↓
[ユーザー選択] → [Gemini API] → [選択論文の要約生成] → [結果表示]
```

## 10. 将来的な拡張可能性

プロトタイプの基本機能を土台に、将来的に以下の機能拡張が考えられる：

1. 複数の論文ソース（Semantic Scholar、Google Scholar）との連携
2. より高度な論文関係性の可視化（引用ネットワークなど）
3. 論文全文の解析機能
4. ユーザーアカウントと検索履歴保存
5. 複数ユーザーでの共同研究機能
6. より高度なレポート生成機能

## 11. 評価基準

プロトタイプの成功は以下の基準で評価：

1. 検索プロセスの透明性：ユーザーがAIの検索・評価プロセスを理解できるか
2. 操作性：直感的なUIで初心者でも使いこなせるか
3. 結果の質：関連性の高い論文が適切に検索・評価されるか
4. 応答性：システムがストレスなく動作するか
5. 拡張性：将来的な機能拡張が容易な構造になっているか

この要件定義に基づいてプロトタイプを開発することで、論文検索プロセスの透明化と視覚化という核心的な価値を早期に検証することができます。